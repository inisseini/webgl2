{"ast":null,"code":"import _objectSpread from\"C:/Users/issei/Desktop/dev-webGL-exhibition/exhibition/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useMemo,useState,useRef,Children}from\"react\";import{applyProps,useThree}from\"@react-three/fiber\";import{useGLTF,useAnimations,PresentationControls,Html}from\"@react-three/drei\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Car=function Car(props){var _useGLTF=useGLTF('Base.glb'),scene=_useGLTF.scene,nodes=_useGLTF.nodes,materials=_useGLTF.materials,animations=_useGLTF.animations;var tire1=useGLTF('VLEAP_Car_Tire1.glb');var tire2=useGLTF('VLEAP_Car_Tire2.glb');var doorAnim=useAnimations(animations,scene);var doorAction=doorAnim.actions[doorAnim.names[0]];doorAnim.mixer._actions[0].repetitions=1;doorAction.paused=true;useEffect(function(){doorAction.paused=false;doorAnim.mixer.setTime(props.doorAnim/50);doorAction.play();doorAction.paused=true;},[props.doorAnim]);var tireAnim=useAnimations(tire1.animations,tire1.scene);var tireAction=tireAnim.actions[tireAnim.names[0]];tireAnim.mixer._actions[0].repetitions=1;tireAction.paused=true;useEffect(function(){console.log(props.tireAnimTime);tireAction.paused=false;tireAnim.mixer.setTime(props.tireAnimTime/50);tireAction.play();tireAction.paused=true;},[props.tireAnim,props.tireAnimTime]);applyProps(materials.CarMaincolor,{roughness:0.1,metalness:0.5,color:props.colorDetail,envMapIntensity:1});useEffect(function(){if(props.light){applyProps(materials.FlontLightGlass,{color:'white',roughness:0,envMapIntensity:100,metalness:1});}else{applyProps(materials.FlontLightGlass,{color:'black',roughness:0,envMapIntensity:2,metalness:0});}},[props.light]);useMemo(function(){Object.values(nodes).forEach(function(node){return node.isMesh&&(node.receiveShadow=node.castShadow=true);});//applyProps(tire1.materials.tyre, { color: '#000', roughness: 0.3, roughnessMap: null, normalScale: [4, 4] })\napplyProps(materials.GLASS,{color:'#fff',roughness:0,clearcoat:0.9});applyProps(materials.FlontLightGlass,{color:'#ffffe0',roughness:0,clearcoat:1});applyProps(materials.FrontLightWhite,{color:'#ff7f50',roughness:0,clearcoat:1,envMapIntensity:1});applyProps(materials.BackLED,{color:'red',roughness:0,envMapIntensity:1,metalness:0});applyProps(materials.BackBlackGlass,{color:'red',roughness:0,clearcoat:0.6});applyProps(materials.CarMaincolor,{roughness:0.1,metalness:0.5,color:props.carColor,envMapIntensity:1});},[nodes,materials]);return/*#__PURE__*/_jsxs(PresentationControls,{cursor:true,snap:false,children:[/*#__PURE__*/_jsx(\"primitive\",_objectSpread(_objectSpread({object:scene},props),{},{dispose:null,position:props.position,rotation:props.rotation,scale:[1,1,1],className:\"aaa\",children:props.animation?/*#__PURE__*/_jsx(Html,{transform:true,className:\"animationDot\",zIndexRange:[100000000000000,0],position:[1,1.2,-0.75],rotation:[0,1.5,0],calculatePosition:[0,0,0],occlude:true,onClick:function onClick(){return console.log('aa');}}):undefined})),/*#__PURE__*/_jsx(\"primitive\",_objectSpread(_objectSpread({object:props.tire==2?tire2.scene:tire1.scene},props),{},{dispose:null,position:props.position,rotation:props.rotation,scale:[1,1,1]}))]});};export default Car;","map":{"version":3,"names":["useEffect","useMemo","useState","useRef","Children","applyProps","useThree","useGLTF","useAnimations","PresentationControls","Html","Car","props","scene","nodes","materials","animations","tire1","tire2","doorAnim","doorAction","actions","names","mixer","_actions","repetitions","paused","setTime","play","tireAnim","tireAction","console","log","tireAnimTime","CarMaincolor","roughness","metalness","color","colorDetail","envMapIntensity","light","FlontLightGlass","Object","values","forEach","node","isMesh","receiveShadow","castShadow","GLASS","clearcoat","FrontLightWhite","BackLED","BackBlackGlass","carColor","position","rotation","animation","undefined","tire"],"sources":["C:/Users/issei/Desktop/dev-webGL-exhibition/exhibition/src/Car.js"],"sourcesContent":["import { useEffect, useMemo, useState, useRef, Children } from \"react\";\r\nimport { applyProps, useThree } from \"@react-three/fiber\";\r\nimport { useGLTF, useAnimations, PresentationControls, Html} from \"@react-three/drei\";\r\n  \r\nconst Car = (props) => {\r\n  const { scene, nodes, materials, animations } = useGLTF('Base.glb');\r\n  const tire1 = useGLTF('VLEAP_Car_Tire1.glb');\r\n  const tire2 = useGLTF('VLEAP_Car_Tire2.glb');\r\n\r\n  const doorAnim = useAnimations(animations, scene);\r\n  const doorAction = doorAnim.actions[doorAnim.names[0]];  \r\n  doorAnim.mixer._actions[0].repetitions = 1;\r\n  doorAction.paused = true; \r\n\r\n\r\n  useEffect(() => {\r\n    doorAction.paused = false;\r\n    doorAnim.mixer.setTime(props.doorAnim / 50);\r\n    doorAction.play();\r\n    doorAction.paused = true;\r\n  }, [props.doorAnim])\r\n\r\n  const tireAnim = useAnimations(tire1.animations, tire1.scene);\r\n  const tireAction = tireAnim.actions[tireAnim.names[0]];  \r\n  tireAnim.mixer._actions[0].repetitions = 1;\r\n  tireAction.paused = true;\r\n\r\n\r\n  useEffect(() => {\r\n    console.log(props.tireAnimTime);\r\n    tireAction.paused = false;\r\n    tireAnim.mixer.setTime(props.tireAnimTime/ 50);\r\n    tireAction.play();\r\n    tireAction.paused = true;\r\n  }, [props.tireAnim, props.tireAnimTime])\r\n\r\n  applyProps(materials.CarMaincolor, { roughness: 0.1, metalness: 0.5, color: props.colorDetail, envMapIntensity: 1 });\r\n\r\n  useEffect(() => {\r\n    if(props.light) {\r\n      applyProps(materials.FlontLightGlass,  { color: 'white', roughness: 0, envMapIntensity: 100, metalness: 1 });\r\n    } else {\r\n      applyProps(materials.FlontLightGlass,  { color: 'black', roughness: 0, envMapIntensity: 2, metalness: 0 });\r\n    }\r\n  }, [props.light])\r\n\r\n  useMemo(() => {\r\n    Object.values(nodes).forEach((node) => node.isMesh && (node.receiveShadow = node.castShadow = true))\r\n    //applyProps(tire1.materials.tyre, { color: '#000', roughness: 0.3, roughnessMap: null, normalScale: [4, 4] })\r\n    applyProps(materials.GLASS, { color: '#fff', roughness: 0, clearcoat: 0.9 })\r\n    applyProps(materials.FlontLightGlass, { color: '#ffffe0', roughness: 0, clearcoat: 1 })\r\n    applyProps(materials.FrontLightWhite, { color: '#ff7f50', roughness: 0, clearcoat: 1, envMapIntensity: 1 })\r\n    applyProps(materials.BackLED, { color: 'red', roughness: 0, envMapIntensity: 1, metalness: 0 })\r\n    applyProps(materials.BackBlackGlass, { color: 'red', roughness: 0, clearcoat: 0.6 })\r\n    applyProps(materials.CarMaincolor, { roughness: 0.1, metalness: 0.5, color: props.carColor, envMapIntensity: 1 })\r\n  }, [nodes, materials])\r\n\r\n  return (\r\n    <PresentationControls\r\n      cursor\r\n      snap={false}\r\n    >\r\n      <primitive \r\n        object={scene} {...props}\r\n        dispose={null}\r\n        position={props.position}\r\n        rotation={props.rotation} \r\n        scale={[1, 1, 1]}\r\n        className='aaa'\r\n      >\r\n        {props.animation ? \r\n          <Html\r\n            transform\r\n            className=\"animationDot\"\r\n            zIndexRange={[100000000000000, 0]}\r\n            position={[1, 1.2, -0.75]}\r\n            rotation={[0, 1.5, 0]}\r\n            calculatePosition={[0, 0, 0]}\r\n            occlude\r\n            onClick={() => console.log('aa')}\r\n          >\r\n          </Html>\r\n        : undefined}\r\n      </primitive>\r\n      <primitive\r\n        object={ props.tire == 2 ? tire2.scene : tire1.scene} {...props}\r\n        dispose={null}\r\n        position={props.position}\r\n        rotation={props.rotation} \r\n        scale={[1, 1, 1]}\r\n      ></primitive>\r\n    </PresentationControls>\r\n  )\r\n}\r\n\r\nexport default Car;"],"mappings":"2IAAA,OAASA,SAAS,CAAEC,OAAO,CAAEC,QAAQ,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CACtE,OAASC,UAAU,CAAEC,QAAQ,KAAQ,oBAAoB,CACzD,OAASC,OAAO,CAAEC,aAAa,CAAEC,oBAAoB,CAAEC,IAAI,KAAO,mBAAmB,CAAC,wFAEtF,GAAMC,IAAG,CAAG,QAANA,IAAG,CAAIC,KAAK,CAAK,CACrB,aAAgDL,OAAO,CAAC,UAAU,CAAC,CAA3DM,KAAK,UAALA,KAAK,CAAEC,KAAK,UAALA,KAAK,CAAEC,SAAS,UAATA,SAAS,CAAEC,UAAU,UAAVA,UAAU,CAC3C,GAAMC,MAAK,CAAGV,OAAO,CAAC,qBAAqB,CAAC,CAC5C,GAAMW,MAAK,CAAGX,OAAO,CAAC,qBAAqB,CAAC,CAE5C,GAAMY,SAAQ,CAAGX,aAAa,CAACQ,UAAU,CAAEH,KAAK,CAAC,CACjD,GAAMO,WAAU,CAAGD,QAAQ,CAACE,OAAO,CAACF,QAAQ,CAACG,KAAK,CAAC,CAAC,CAAC,CAAC,CACtDH,QAAQ,CAACI,KAAK,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACC,WAAW,CAAG,CAAC,CAC1CL,UAAU,CAACM,MAAM,CAAG,IAAI,CAGxB1B,SAAS,CAAC,UAAM,CACdoB,UAAU,CAACM,MAAM,CAAG,KAAK,CACzBP,QAAQ,CAACI,KAAK,CAACI,OAAO,CAACf,KAAK,CAACO,QAAQ,CAAG,EAAE,CAAC,CAC3CC,UAAU,CAACQ,IAAI,EAAE,CACjBR,UAAU,CAACM,MAAM,CAAG,IAAI,CAC1B,CAAC,CAAE,CAACd,KAAK,CAACO,QAAQ,CAAC,CAAC,CAEpB,GAAMU,SAAQ,CAAGrB,aAAa,CAACS,KAAK,CAACD,UAAU,CAAEC,KAAK,CAACJ,KAAK,CAAC,CAC7D,GAAMiB,WAAU,CAAGD,QAAQ,CAACR,OAAO,CAACQ,QAAQ,CAACP,KAAK,CAAC,CAAC,CAAC,CAAC,CACtDO,QAAQ,CAACN,KAAK,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACC,WAAW,CAAG,CAAC,CAC1CK,UAAU,CAACJ,MAAM,CAAG,IAAI,CAGxB1B,SAAS,CAAC,UAAM,CACd+B,OAAO,CAACC,GAAG,CAACpB,KAAK,CAACqB,YAAY,CAAC,CAC/BH,UAAU,CAACJ,MAAM,CAAG,KAAK,CACzBG,QAAQ,CAACN,KAAK,CAACI,OAAO,CAACf,KAAK,CAACqB,YAAY,CAAE,EAAE,CAAC,CAC9CH,UAAU,CAACF,IAAI,EAAE,CACjBE,UAAU,CAACJ,MAAM,CAAG,IAAI,CAC1B,CAAC,CAAE,CAACd,KAAK,CAACiB,QAAQ,CAAEjB,KAAK,CAACqB,YAAY,CAAC,CAAC,CAExC5B,UAAU,CAACU,SAAS,CAACmB,YAAY,CAAE,CAAEC,SAAS,CAAE,GAAG,CAAEC,SAAS,CAAE,GAAG,CAAEC,KAAK,CAAEzB,KAAK,CAAC0B,WAAW,CAAEC,eAAe,CAAE,CAAE,CAAC,CAAC,CAEpHvC,SAAS,CAAC,UAAM,CACd,GAAGY,KAAK,CAAC4B,KAAK,CAAE,CACdnC,UAAU,CAACU,SAAS,CAAC0B,eAAe,CAAG,CAAEJ,KAAK,CAAE,OAAO,CAAEF,SAAS,CAAE,CAAC,CAAEI,eAAe,CAAE,GAAG,CAAEH,SAAS,CAAE,CAAE,CAAC,CAAC,CAC9G,CAAC,IAAM,CACL/B,UAAU,CAACU,SAAS,CAAC0B,eAAe,CAAG,CAAEJ,KAAK,CAAE,OAAO,CAAEF,SAAS,CAAE,CAAC,CAAEI,eAAe,CAAE,CAAC,CAAEH,SAAS,CAAE,CAAE,CAAC,CAAC,CAC5G,CACF,CAAC,CAAE,CAACxB,KAAK,CAAC4B,KAAK,CAAC,CAAC,CAEjBvC,OAAO,CAAC,UAAM,CACZyC,MAAM,CAACC,MAAM,CAAC7B,KAAK,CAAC,CAAC8B,OAAO,CAAC,SAACC,IAAI,QAAKA,KAAI,CAACC,MAAM,GAAKD,IAAI,CAACE,aAAa,CAAGF,IAAI,CAACG,UAAU,CAAG,IAAI,CAAC,GAAC,CACpG;AACA3C,UAAU,CAACU,SAAS,CAACkC,KAAK,CAAE,CAAEZ,KAAK,CAAE,MAAM,CAAEF,SAAS,CAAE,CAAC,CAAEe,SAAS,CAAE,GAAI,CAAC,CAAC,CAC5E7C,UAAU,CAACU,SAAS,CAAC0B,eAAe,CAAE,CAAEJ,KAAK,CAAE,SAAS,CAAEF,SAAS,CAAE,CAAC,CAAEe,SAAS,CAAE,CAAE,CAAC,CAAC,CACvF7C,UAAU,CAACU,SAAS,CAACoC,eAAe,CAAE,CAAEd,KAAK,CAAE,SAAS,CAAEF,SAAS,CAAE,CAAC,CAAEe,SAAS,CAAE,CAAC,CAAEX,eAAe,CAAE,CAAE,CAAC,CAAC,CAC3GlC,UAAU,CAACU,SAAS,CAACqC,OAAO,CAAE,CAAEf,KAAK,CAAE,KAAK,CAAEF,SAAS,CAAE,CAAC,CAAEI,eAAe,CAAE,CAAC,CAAEH,SAAS,CAAE,CAAE,CAAC,CAAC,CAC/F/B,UAAU,CAACU,SAAS,CAACsC,cAAc,CAAE,CAAEhB,KAAK,CAAE,KAAK,CAAEF,SAAS,CAAE,CAAC,CAAEe,SAAS,CAAE,GAAI,CAAC,CAAC,CACpF7C,UAAU,CAACU,SAAS,CAACmB,YAAY,CAAE,CAAEC,SAAS,CAAE,GAAG,CAAEC,SAAS,CAAE,GAAG,CAAEC,KAAK,CAAEzB,KAAK,CAAC0C,QAAQ,CAAEf,eAAe,CAAE,CAAE,CAAC,CAAC,CACnH,CAAC,CAAE,CAACzB,KAAK,CAAEC,SAAS,CAAC,CAAC,CAEtB,mBACE,MAAC,oBAAoB,EACnB,MAAM,MACN,IAAI,CAAE,KAAM,wBAEZ,8CACE,MAAM,CAAEF,KAAM,EAAKD,KAAK,MACxB,OAAO,CAAE,IAAK,CACd,QAAQ,CAAEA,KAAK,CAAC2C,QAAS,CACzB,QAAQ,CAAE3C,KAAK,CAAC4C,QAAS,CACzB,KAAK,CAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CACjB,SAAS,CAAC,KAAK,UAEd5C,KAAK,CAAC6C,SAAS,cACd,KAAC,IAAI,EACH,SAAS,MACT,SAAS,CAAC,cAAc,CACxB,WAAW,CAAE,CAAC,eAAe,CAAE,CAAC,CAAE,CAClC,QAAQ,CAAE,CAAC,CAAC,CAAE,GAAG,CAAE,CAAC,IAAI,CAAE,CAC1B,QAAQ,CAAE,CAAC,CAAC,CAAE,GAAG,CAAE,CAAC,CAAE,CACtB,iBAAiB,CAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAC7B,OAAO,MACP,OAAO,CAAE,yBAAM1B,QAAO,CAACC,GAAG,CAAC,IAAI,CAAC,EAAC,EAE5B,CACP0B,SAAS,GACD,cACZ,8CACE,MAAM,CAAG9C,KAAK,CAAC+C,IAAI,EAAI,CAAC,CAAGzC,KAAK,CAACL,KAAK,CAAGI,KAAK,CAACJ,KAAM,EAAKD,KAAK,MAC/D,OAAO,CAAE,IAAK,CACd,QAAQ,CAAEA,KAAK,CAAC2C,QAAS,CACzB,QAAQ,CAAE3C,KAAK,CAAC4C,QAAS,CACzB,KAAK,CAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,GACN,GACQ,CAE3B,CAAC,CAED,cAAe7C,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}